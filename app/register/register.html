<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MUN deputy registration</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/additional-methods.min.js"></script>
    <script src="https://unpkg.com/xregexp/xregexp-all.js"></script>
    <link href="./dist/css/bootstrap-select.min.css" rel="stylesheet" />
    <script src="./dist/js/bootstrap-select.min.js"></script>
    <script>
      function countryfix() {
        if (!$("#country").valid()) {
          $(".dropdown-toggle.btn-light").addClass("is-invalid");
          $(".dropdown-toggle.btn-light").after($("label#country-error"));
          console.log();
        } else {
          $(".dropdown-toggle.btn-light").removeClass("is-invalid");
        }
        if (!$("#legal").valid()) {
          $(".form-check-label").after($("label#legal-error"));
          console.log();
        }
      }
      $(document).ready(function() {
        $.validator.addMethod(
          "regex",
          function(value, element, regexp) {
            var re = new XRegExp(regexp);
            return this.optional(element) || re.test(value);
          },
          "Please check your input."
        );
        $("#need-validation").validate({
          rules: {
            name: {
              regex: "^((['`\\-\\p{L}])+[ ]?)*$",
              minlength: 2,
              maxlength: 30
            },
            surname: {
              regex: "^((['`\\-\\p{L}])+[ ]?)*$",
              minlength: 2,
              maxlength: 30
            },
            institution: {
              regex: "^((['`.,№#\"\\-\\p{L}0-9])+[ ]?)*$",
              minlength: 5,
              maxlength: 40
            },
            gradeletter: {
              regex: "^[\\p{Lu}]$"
            },
            phone: {
              regex:
                "^(([\\+][0-9]{11})|(^[\\+][0-9][\\-][0-9]{3}[\\-][0-9]{3}[\\-][0-9]{4})|(^[\\+][0-9][(][0-9]{3}[)][0-9]{3}[\\-][0-9]{4})|(^[\\+][0-9][(][0-9]{4}[)][0-9]{3}[\\-][0-9]{3}))$"
            },
            email: {
              email: true
            }
          },
          messages: {
            name: {
              regex: "Use only letters, space and -'` characters",
              required: "Required to use in certificates and account info"
            },
            surname: {
              regex: "Use only letters, space and -'` characters",
              required: "Required to use in certificates and account info"
            },
            institution: {
              regex: "Use only letters, space and -'`.,№# characters",
              required: "Required for statistical purposes"
            },
            gradeletter: {
              regex: "Use one uppercase letter"
            },
            phone: {
              regex:
                'Use <span style="color:blue"> +xxxxxxxxxxx  +x-xxx-xxx-xxxx <br> +x(xxx)xxx-xxxx +x(xxxx)xxx-xxx </span> format',
              required: "Required to contact you"
            },
            email: {
              email: "Must resemble name@domain.com format",
              required: "Required to send account information"
            },
            legal: {
              required: "This agreement is required"
            }
          },
          errorClass: "is-invalid"
        });

        $(".country").selectpicker({
          liveSearch: true,
          dropupAuto: false,
          size: 6
        });

        if ($("#occupation").val() === "student") {
          $("#teacherfield").hide();
          $("#studentfield").show();
        } else {
          $("#studentfield").hide();
          $("#teacherfield").show();
        }
        $("#occupation").on("change", function() {
          if (this.value === "student") {
            $("#teacherfield").hide();
            $("#studentfield").show();
          } else {
            $("#studentfield").hide();
            $("#teacherfield").show();
          }
        });
      });
    </script>
  </head>

  <body>
    <div class="container">
      <div class="card" style="width: 100%; margin-top: 50px;">
        <div class="card-body">
          <h5 class="card-title">Model UN Delegate Registration Form</h5>
          <h6 class="card-subtitle mb-2 text-muted">
            Registration is open for everyone. <br />
            Please consider planning your arrival to the event.
          </h6>
          <form action="../app/register/index.php" id="need-validation">
            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="email"
                  >Email <span class="attention">*</span></label
                >
                <input
                  name="email"
                  type="email"
                  class="form-control"
                  id="email"
                  required
                />
              </div>
              <div class="form-group col-md-4">
                <label for="name"
                  >First Name <span class="attention">*</span></label
                >
                <input
                  name="name"
                  type="text"
                  class="form-control"
                  id="name"
                  required
                />
              </div>
              <div class="form-group col-md-4">
                <label for="surname"
                  >Last Name <span class="attention">*</span></label
                >
                <input
                  name="surname"
                  type="text"
                  class="form-control"
                  id="surname"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="institution"
                  >Your School/College/Usniversity Name
                  <span class="attention">*</span></label
                >
                <input
                  name="institution"
                  type="text"
                  class="form-control"
                  id="institution"
                  placeholder="NIS PhM Uralsk"
                  required
                />
              </div>
              <div class="form-group col-md-3">
                <label for="occupation"
                  >Occupation <span class="attention">*</span></label
                >
                <select
                  name="occupation"
                  class="custom-select"
                  id="occupation"
                  required
                >
                  <option value="student">Student</option>
                  <option value="teacher">Teacher</option>
                </select>
              </div>
              <div class="col-md-3">
                <div class="form-row" id="studentfield">
                  <div class="form-group col-md-6">
                    <label for="grade">Grade</label>
                    <select name="grade" class="custom-select" id="grade">
                      <option value=""></option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                    </select>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="gradeletter">Grade Letter</label>
                    <input
                      name="gradeletter"
                      type="text"
                      class="form-control"
                      id="gradeletter"
                    />
                  </div>
                </div>
                <div class="form-row" id="teacherfield">
                  <div class="form-group teacherfield col-md-12">
                    <label for="subject">Subject You Teach</label>
                    <input
                      name="subject"
                      type="text"
                      class="form-control"
                      id="subject"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="phone"
                  >Phone Number <span class="attention">*</span></label
                >
                <input
                  name="phone"
                  type="tel"
                  class="form-control"
                  id="phone"
                  required
                />
              </div>
              <div class="form-group col-md-4">
                <label for="topic">Topic Preference</label>
                <select name="topic" class="custom-select" id="topic">
                  <option value="7">No Preference</option>
                  <option value="climate"
                    >Climate Change Affecting Forest Fires</option
                  >
                  <option value="child"
                    >Eliminating Child Abuse and Trafficking</option
                  >
                  <option value="disease">Disease Epidemic Control</option>
                </select>
              </div>
              <div class="form-group col-md-4">
                <label for="country"
                  >Country to Represent <span class="attention">*</span></label
                >
                <select
                  name="country"
                  type="text"
                  class="country form-control"
                  id="country"
                  onchange="countryfix()"
                  required
                >
                  <option value=""></option>
                  <option value="Internet Explorer">Internet Explorer</option>
                  <option value="Firefox">Firefox</option>
                  <option value="Chrome">Chrome</option>
                  <option value="Opera">Opera</option>
                  <option value="Safari">Safari</option>
                </select>
              </div>
            </div>
            <div style="width: 100%;">
              <div class="form-check">
                <input
                  name="legal"
                  class="form-check-input"
                  type="checkbox"
                  value="agree"
                  id="legal"
                  required
                />
                <label class="form-check-label" for="legal">
                  <span class="attention">*</span>
                  I agree to
                  <a href="#">Privacy Policy</a>
                  and
                  <a href="#">Terms of Use</a>
                </label>
              </div>
              <button
                type="submit"
                style="float:right;"
                class="btn btn-md btn-primary"
                onclick="countryfix()"
              >
                Submit
              </button>
              <p></p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
