<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./css/bootstrap.css" />
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="http://munmacs.com/style.css" />
    <title>SysAdmin Control Panel</title>

    <script>
      $(document).ready(function() {
        $("#submit-reset-countries").click(function() {
          event.preventDefault();

          var formData = $(this)
            .closest("form")
            .serializeArray();
          formData.push({ name: this.name, value: this.value });

          $("#spinner-reset-countries").show();

          console.log(formData);

          $.ajax({
            type: "GET",
            url: "/api/countries",
            data: formData,
            dataType: "json",
            success: function(data) {
              if (data.success) {
                $("#spinner-reset-countries").hide();
                $("#success-reset-countries").show();
                setTimeout(() => {
                  $("#success-reset-countries").hide();
                }, 2000);
              } else {
                alert(data.msg);
                $("#spinner-reset-countries").hide();
              }
            },
            error: function(data) {
              alert(data.msg);
              $("#spinner-reset-countries").hide();
            }
          });
        });
      });
    </script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-2" style="background-color: #eeeeee">
          <nav
            class="nav flex-column nav-pills"
            role="tablist"
            id="tab"
            style="height: 100vh; padding-top: 30px;"
          >
            <a
              role="tab"
              id="countries-tab"
              class="nav-link active"
              href="#countries"
              data-toggle="pill"
              aria-controls="countries"
              aria-selected="true"
              >Countries</a
            >
            <a
              role="tab"
              id="countries-tab"
              class="nav-link"
              href="#admins"
              data-toggle="pill"
              aria-controls="admins"
              aria-selected="false"
              >Admins</a
            >
            <a
              role="tab"
              id="requests-tab"
              class="nav-link"
              href="#requests"
              data-toggle="pill"
              aria-controls="rquests"
              aria-selected="false"
              >Requests</a
            >
            <a
              role="tab"
              id="users-tab"
              class="nav-link"
              href="#users"
              data-toggle="pill"
              aria-controls="users"
              aria-selected="false"
              >Users</a
            >
          </nav>
        </div>
        <div class="col-10">
          <div
            class="tab-content"
            id="tabContent"
            style="padding-top: 30px; padding-left: 30px;"
          >
            <div
              class="tab-pane fade show active"
              id="countries"
              role="tabpanel"
              aria-labelledby="countries-tab"
            >
              <h1>Countries</h1>
              <br />
              <h3>Reset Country List</h3>
              <form id="reset-countries">
                <div class="row">
                  <div class="form-group col-2">
                    <label for="password-reset-countries">Admin Password</label>
                    <input
                      class="form-control"
                      type="password"
                      name="password"
                      id="password-reset-countries"
                      required
                    />
                    <div
                      id="spinner-reset-countries"
                      class="spinner-border"
                      role="status"
                      style="display: none;"
                    >
                      <span class="sr-only">Loading...</span>
                    </div>
                    <span
                      id="success-reset-countries"
                      class="badge badge-pill badge-success"
                      style="display: none;"
                      >success</span
                    >
                  </div>
                </div>
                <button
                  id="submit-reset-countries"
                  class="btn btn-md btn-primary"
                  type="submit"
                  name="action"
                  value="reset"
                >
                  Reset
                </button>
              </form>
            </div>
            <div
              class="tab-pane fade"
              id="admins"
              role="tabpanel"
              aria-labelledby="admins-tab"
            >
              Admins
            </div>
            <div
              class="tab-pane fade"
              id="requests"
              role="tabpanel"
              aria-labelledby="requests-tab"
            >
              Requests
            </div>
            <div
              class="tab-pane fade"
              id="users"
              role="tabpanel"
              aria-labelledby="users-tab"
            >
              Users
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
